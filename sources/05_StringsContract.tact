import "@stdlib/deploy";

/**
å­—ç¬¦ä¸²
Tact å¯¹å­—ç¬¦ä¸²æä¾›äº†åŸºç¡€æ”¯æŒã€‚å­—ç¬¦ä¸²æ”¯æŒ Unicodeï¼Œå¹¶ä¸”æ²¡æœ‰åƒ \n è¿™æ ·çš„ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦ã€‚

åœ¨æ™ºèƒ½åˆçº¦ä¸­ï¼Œå­—ç¬¦ä¸²çš„ä½¿ç”¨åº”è¯¥éå¸¸æœ‰é™ã€‚æ™ºèƒ½åˆçº¦æ˜¯ç”¨äºç®¡ç†èµ„é‡‘çš„ç²¾ç¡®ç¨‹åºï¼Œå®ƒä»¬å¹¶ä¸é€‚ç”¨äºäº¤äº’å¼çš„å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰ã€‚

å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ã€‚ä¸€æ—¦åˆ›å»ºäº†å­—ç¬¦åºåˆ—ï¼Œè¯¥åºåˆ—å°±æ— æ³•è¢«ä¿®æ”¹ã€‚

å¦‚æœéœ€è¦åœ¨è¿è¡Œæ—¶è¿æ¥å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ StringBuilderã€‚è¿™ä¸ªå¯¹è±¡å¯ä»¥é«˜æ•ˆåœ°å¤„ç†Gasï¼Œå¹¶ä¸”æ”¯æŒå°†å„ç§ç±»å‹é€šè¿‡ append() æ–¹æ³•è¿½åŠ åˆ°å­—ç¬¦ä¸²ä¸­ã€‚
 */
contract StringsContract with Deployable {
    s1: String = "hello world";
    s2: String = "yes unicode ğŸ˜€ ğŸ˜… ä½ å¥½ no escaping"; /// TODO: https://github.com/tact-lang/tact/issues/25 \n \t";
    s3: String;
    s4: String;
    s5: String;
    s6: String;
    init(){
        let i1: Int = -12345;
        let i2: Int = 6780000000; // coins = ton("6.78")

        self.s3 = i1.toString();
        self.s4 = i1.toFloatString(3);
        self.s5 = i2.toCoinsString();
        // è¿è¡Œæ—¶è¿æ¥å­—ç¬¦ä¸²çš„é«˜æ•ˆGasè¾…åŠ©å·¥å…·
        let sb: StringBuilder = beginString();
        sb.append(self.s1);
        sb.append(", your balance is:");
        sb.append(self.s5);
        self.s6 = sb.toString();
    }

    receive("show all"){
        dump(self.s1);
        dump(self.s2);
        dump(self.s3);
        dump(self.s4);
        dump(self.s5);
        dump(self.s6);
    }

    receive("show ops"){
        let s: String = "how are you?";
        dump(s);
        /// TODO: https://github.com/tact-lang/tact/issues/24
        dump(self.s1 == "hello world");
        dump(self.s1 != s);
    }

    get fun result(): String {
        return self.s1;
    }
}